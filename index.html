<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!--<script src="assets/javascript/game.js" type="text/javascript"></script>-->
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <title>Document</title>
</head>

<body>
    <p id="instructions">Press any key to get started!</p>
    <p id="current">Current Word</p>
    <p id="word-guess"></p>
    <p id="incorrect-header">Incorrect Guesses</p>
    <p id="incorrect-letters"></p>
    <p id="guess-count-header"># of Guesses Remaining</p>
    <p id="guess-chance"></p>
    <p id="win-count"></p>
    <p id="game-over"></p>


    <script type="text/javascript">

        function blanks(arr) {
            var blank = [];
            for (var i = 0; i < arr.length; i++) {
                blank.push("_ ");
            }

            return blank;
        }


        var wins = 0;
        var guessCount = 10;
        var incorrectGuess = [];

        var instruction = document.getElementById("instructions");
        var wordGuess = document.getElementById("word-guess");
        var incLetters = document.getElementById("incorrect-letters")
        var guessChances = document.getElementById("guess-chance");
        var winsText = document.getElementById("win-count");
        var gameOver = document.getElementById("game-over")


        var names = {
            0: "SEPHIROTH",
            1: "KEFKA",
            2: "CLOUD",
            3: "TIDUS",
            4: "SEYMOUR"
        }

        var nameIndex = 0;
        var word = names[nameIndex].split("");
        var guess = blanks(word);
        wordGuess.textContent = guess.join(" ");
        guessChances.textContent = guessCount;
        winsText.textContent = wins;

        document.onkeyup = function (event) {

            instruction.textContent = "";
            var userGuess = event.key;
            guessUpper = userGuess.toUpperCase();


            if (word.indexOf(guessUpper) === -1) {
                incorrectGuess.push(guessUpper);
                guessCount--;
            }
            else {
                for (var j = 0; j < guess.length; j++) {
                    if (word[j] === guessUpper) {

                        guess[j] = guessUpper;
                    }
                }
                guessCount--;

            }

            incLetters.textContent = incorrectGuess;
            guessChances.textContent = guessCount;
            wordGuess.textContent = guess.join(" ");


            if (nameIndex < Object.keys(names).length) {
                if (guess.join("") === names[nameIndex]) {
                    wins++;
                    nameIndex++;
                    if (nameIndex === Object.keys(names).length) {
                        gameOver.textContent = "Game Over";

                    }
                    else {
                        guessCount = 10;
                        word = names[nameIndex];
                        guess = blanks(word);
                        incorrectGuess = [];

                    }
                }
                else if (guessCount === 0 && guess.join("") !== names[nameIndex]) {
                    nameIndex++;
                    if (nameIndex === Object.keys(names).length) {
                        gameOver.textContent = "Game Over";
                    }
                    else {
                        guessCount = 10;
                        incorrectGuess = []
                        word = names[nameIndex];
                        guess = blanks(word);
                    }
                }
            }



            console.log(nameIndex);
            incLetters.textContent = incorrectGuess.join(" ");
            guessChances.textContent = guessCount;
            wordGuess.textContent = guess.join(" ");
            winsText.textContent = wins;

        }



    </script>
</body>

</html>